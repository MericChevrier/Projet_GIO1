{"remainingRequest":"C:\\Users\\Quentin\\Documents\\Master\\Semestre_3\\GIO1\\Projet\\seed-vuejs3.0-carto2D-3D\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\Quentin\\Documents\\Master\\Semestre_3\\GIO1\\Projet\\seed-vuejs3.0-carto2D-3D\\src\\components\\views\\ViewOpenlayers.vue?vue&type=style&index=0&id=e8f6fcfc&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\Quentin\\Documents\\Master\\Semestre_3\\GIO1\\Projet\\seed-vuejs3.0-carto2D-3D\\src\\components\\views\\ViewOpenlayers.vue","mtime":1606561933801},{"path":"C:\\Users\\Quentin\\Documents\\Master\\Semestre_3\\GIO1\\Projet\\seed-vuejs3.0-carto2D-3D\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Quentin\\Documents\\Master\\Semestre_3\\GIO1\\Projet\\seed-vuejs3.0-carto2D-3D\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1606322537000},{"path":"C:\\Users\\Quentin\\Documents\\Master\\Semestre_3\\GIO1\\Projet\\seed-vuejs3.0-carto2D-3D\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Quentin\\Documents\\Master\\Semestre_3\\GIO1\\Projet\\seed-vuejs3.0-carto2D-3D\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Quentin\\Documents\\Master\\Semestre_3\\GIO1\\Projet\\seed-vuejs3.0-carto2D-3D\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1606322537000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQojb2wtY29udGFpbmVyIHsNCiAgaGVpZ2h0OiAxMDAlOw0KICB3aWR0aDogMTAwJTsNCn0NCg0KI21lbnVfZ2F1Y2hlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZiA7DQogIGJveC1zaGFkb3c6IDFweCAxcHggMTJweCAjNTU1Ow0KICB6LWluZGV4OiAxOw0KICBwYWRkaW5nOiA1cHggMjBweDsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KCXRvcCA6IDBweDsNCiAgdG9wIDogMHB4Ow0KICBoZWlnaHQgOiAxMDAlOw0KICB3aWR0aCA6IDI3MHB4Ow0KfQ0KDQojbWVudV9kcm9pdGUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmIDsNCglib3gtc2hhZG93OiAxcHggMXB4IDEycHggIzU1NTsNCgl6LWluZGV4OiAxOw0KICBwYWRkaW5nOiA1cHggMjBweDsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KCXRvcCA6IDBweDsNCglyaWdodDogMHB4Ow0KCWZsb2F0OiByaWdodDsNCgloZWlnaHQgOiAxMDAlOw0KCXdpZHRoIDogMzAwcHg7DQp9DQo="},{"version":3,"sources":["C:\\Users\\Quentin\\Documents\\Master\\Semestre_3\\GIO1\\Projet\\seed-vuejs3.0-carto2D-3D\\src\\components\\views\\ViewOpenlayers.vue"],"names":[],"mappings":";AAyPA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACb;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAC7B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACnB,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;EACR,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;EACT,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACf;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;CAC3B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;CAC7B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACnB,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;CACT,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;CACV,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;CACZ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;CACb,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACd","file":"C:/Users/Quentin/Documents/Master/Semestre_3/GIO1/Projet/seed-vuejs3.0-carto2D-3D/src/components/views/ViewOpenlayers.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div id=\"ol-container\" class=\"map\">\r\n    <!--Menu de gauche - situation de base-->\r\n    <div id=\"menu_gauche\">\r\n\t\t  \t<div id=\"situation\">\r\n\t\t\t  \t<h1 class=\"title is-4\">Situation</h1>\r\n\t\t\t  \t<input class=\"input is-primary is-small\" type=\"text\" placeholder=\"Text\" id=\"search\" name=\"barre_recherche\">\r\n          <button class=\"button is-small\" type=\"button\">Recherche</button>\r\n\t\t\t  \t<h2 class=\"subtitle is-6 has-text-left\">Gestion des couches :</h2>\r\n\t\t\t  \t<h3 class=\"subtitle is-6 has-text-left has-text-weight-light\"><U>Fond de plan</U></h3>\r\n\t\t\t  \t<p><label class=\"radio is-size-7 has-text-black\"><input type=\"radio\" v-on:click=\"changeBaselayer('mapbox_rues')\" checked> Fond Rues</label></p>\r\n\t\t  \t\t<p><label class=\"radio is-size-7 has-text-black\"><input type=\"radio\" v-on:click=\"changeBaselayer('mapbox_satellite')\" /> Fond Satellite</label></p>\r\n\t\t    \t<p><label class=\"radio is-size-7 has-text-black\"><input type=\"radio\" v-on:click=\"changeBaselayer('blanc')\" /> Fond Blanc</label></p>\r\n\t\t  \t\t<h3 class=\"subtitle is-6 has-text-left has-text-weight-light\"><U>Mensuration officielle :</U></h3>\r\n\t\t  \t\t<!-- <p><label class=\"is-size-7 has-text-black\"><input type=\"checkBox\" name=\"point_limite\" onclick=\"change_point_limite(this.checked)\"> Point limite</label></p> -->\r\n\t\t  \t\t<p><label class=\"is-size-7 has-text-black\"><input type=\"checkBox\" id=\"bien_fond\" v-on:click=\"ChangeLayerVisibility('bien_fond')\"> Biend-fonds</label></p>\r\n\t\t  \t\t<p><label class=\"is-size-7 has-text-black\"><input type=\"checkBox\" id=\"batiment\" v-on:click=\"ChangeLayerVisibility('batiment')\"> Bâtiment</label></p>\r\n\t\t  \t\t<p><label class=\"is-size-7 has-text-black\"><input type=\"checkBox\" id=\"od_lineaire\" v-on:click=\"ChangeLayerVisibility('od_lineaire')\"> Objets linéaires</label></p>\r\n\t\t  \t\t<p><label class=\"is-size-7 has-text-black\"><input type=\"checkBox\" id=\"od_surfacique\" v-on:click=\"ChangeLayerVisibility('od_surfacique')\"> Objets surfaciques</label></p>\r\n\t\t\t  \t<p><label class=\"is-size-7 has-text-black\"><input type=\"checkBox\" id=\"surface_cs\" v-on:click=\"ChangeLayerVisibility('surface_cs')\"> Couverture du sol</label></p>\r\n\t\t\t  \t<h3 class=\"subtitle is-6 has-text-left has-text-weight-light\"><U>Restrictions :</U></h3>\r\n\t\t\t  \t<p><label class=\"is-size-7 has-text-black\"><input type=\"checkBox\" name=\"distances_aux_limites\" onclick=\"change_distances_aux_limites(this.checked)\"> Distances aux limites</label></p>\r\n\t\t\t  \t<p><label class=\"is-size-7 has-text-black\"><input type=\"checkBox\" name=\"distances_aux_forêt\" onclick=\"change_distances_aux_forêt(this.checked)\"> Distances aux forêt</label></p>\r\n\t\t\t  \t<p><label class=\"is-size-7 has-text-black\"><input type=\"checkBox\" name=\"distances_cours_deau\" onclick=\"change_distances_cours_deau(this.checked)\"> Distances aux cours d'eau</label></p>\r\n\t\t\t  \t<p><label class=\"is-size-7 has-text-black\"><input type=\"checkBox\" name=\"alignements_routes\" onclick=\"change_alignements_routes(this.checked)\"> Alignements routes</label></p>\r\n\t\t\t  \t<p><label class=\"is-size-7 has-text-black\"><input type=\"checkBox\" name=\"aire_implantation\" onclick=\"change_aire_implantation(this.checked)\"> Aire d'implantation</label></p>\r\n\t\t\t  \t<p><label class=\"is-size-7 has-text-black\"><input type=\"checkBox\" name=\"zone_affectation\" onclick=\"change_zone_affectation(this.checked)\"> Zone d'affectation</label></p>\r\n          <!--<button type=\"button\" name=\"import_projet\" id=\"import_projet\" onclick=\"poly_draw()\">Importer un nouveau projet</button>-->\r\n\t\t  \t</div>\r\n  \t</div>\r\n\r\n    <!--Menu de droite - information sur le projet-->\r\n\t\t<div id=\"menu_droite\">\r\n\t\t\t<div id=\"information_projet\">\r\n\t\t\t\t<h1 class=\"title is-4\">Informations</h1>\r\n\t\t\t\t<button class=\"button is-small\" type=\"button\" id=\"import_json\" v-on:click=\"import_json()\">Importer .json</button>\r\n\t\t\t\t<h2 class=\"subtitle is-5 has-text-weight-semibold\">Général :</h2>\r\n\t\t  \t<h3 class=\"subtitle is-6 has-text-left has-text-weight-light\"><U>Mensuration officielle :</U></h3>\r\n\t\t  \t<p><label class=\"is-size-7 has-text-black\">Propriétaire :</label></p>\r\n\t\t\t\t<p><label class=\"is-size-7 has-text-black\">Porteur du projet :</label></p>\r\n\t\t\t\t<p><label class=\"is-size-7 has-text-black\">Parcelle:</label></p>\r\n\t\t\t\t<p><label class=\"is-size-7 has-text-black\">Date de mise à l'enquête :</label></p>\r\n\t\t\t\t<p><label class=\"is-size-7 has-text-black\">Zone d'affectation :</label></p>\r\n\t\t\t\t<p><label class=\"is-size-7 has-text-black\">Surface de plancher :</label></p>\r\n\t\t\t\t<p><label class=\"is-size-7 has-text-black\">Surface au sol :</label></p>\r\n\t\t\t\t<button class=\"button is-small\" type=\"button\" name=\"validation\" id=\"validation\" onclick=\"poly_draw()\">Validation</button>\r\n\t\t\t\t<h3 class=\"subtitle is-6 has-text-left has-text-weight-light\"><U>Respect des restrictions 2D :</U></h3>\r\n\t\t\t\t<p><label class=\"is-size-7 has-text-black\">Implantation</label></p>\r\n\t\t\t\t<p><label class=\"is-size-7 has-text-black\">Surface de plancher (xxm² sur xxm²)</label></p>\r\n\t\t\t\t<p><label class=\"is-size-7 has-text-black\">Surface au sol (xxm² sur xxm²)</label></p>\r\n\t\t\t\t<h3 class=\"subtitle is-6 has-text-left has-text-weight-light\"><U>Géométrie 3D :</U></h3>\r\n\t\t\t\t<button class=\"button is-small\" type=\"button\" name=\"3D\" id=\"3D\" onclick=\"poly_draw()\">Passer en mode 3D</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport 'ol/ol.css';\r\nimport * as ol from 'ol';\r\nimport Map from 'ol/Map';\r\nimport OSM from 'ol/source/OSM';\r\nimport XYZ from 'ol/source/XYZ';\r\nimport TileLayer from 'ol/layer/Tile';\r\nimport View from 'ol/View';\r\nimport Vector from 'ol/layer/Vector';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport GeoJSON from 'ol/format/GeoJSON';\r\nimport * as olProj from 'ol/proj';\r\nimport * as import_projet from './import_projet.js';\r\n\r\n\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return{\r\n      center: [7.40, 46.23],\r\n      olmap:null,\r\n      mapbox_rues:null,\r\n      mapbox_satellite:null,\r\n      zoom: 12,\r\n      mapbox_url_rues: 'https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWVyaWNjaGV2cmllciIsImEiOiJjazhzbDVvZm4wZDdkM2RvNXI2d2FjdXNxIn0.bje3c5XWbhb_eNI-PTx5cg',\r\n      mapbox_name_rues: 'mapbox_rues',\r\n      mapbox_url_satellite: 'https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v11/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWVyaWNjaGV2cmllciIsImEiOiJjazhzbDVvZm4wZDdkM2RvNXI2d2FjdXNxIn0.bje3c5XWbhb_eNI-PTx5cg',\r\n      mapbox_name_satellite: 'mapbox_satellite',\r\n    }\r\n  },\r\n  computed:{\r\n    /**\r\n     * Transform coordinate from EPSG:4326 to EPSG:3857\r\n     *\r\n     * @use center in EPSG:4326\r\n     * @return center in EPSG:3857\r\n     */\r\n    center3857(){\r\n      return olProj.transform(this.center, 'EPSG:4326', 'EPSG:3857');\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * Init Openlayers map\r\n     *\r\n     * @param {number[]} mapcenter center of the map in EPSG:3857\r\n     * @param {number} mapzoom zommlevel\r\n     * @returns {Map} initmap new openlayers map\r\n     */\r\n    setupOpenlayersMap (mapcenter,mapzoom) {\r\n      return new Map({\r\n        target: 'ol-container',\r\n        view: new View({\r\n          center: mapcenter,\r\n          zoom: mapzoom\r\n        })\r\n      })\r\n    },\r\n\r\n    setupmapbox (url, name, visibility) {\r\n      var name = new TileLayer({\r\n        source: new XYZ({\r\n          url: url\r\n        }),\r\n        visible: visibility,\r\n      })\r\n\r\n      this.olmap.addLayer(name)\r\n      return name\r\n\r\n    },\r\n\r\n    //Affichage du fond de carte\r\n\t\tchangeBaselayer : function (layer) {\r\n      console.log(\"changeBaselayer(\\\"\" + layer + \"\\\")\");\r\n\r\n\r\n        switch (layer) {\r\n          case \"mapbox_rues\":\r\n            this.mapbox_rues.setVisible(true);\r\n\t\t\t\t  \tthis.mapbox_satellite.setVisible(false);\r\n\t\t\t\t  \tbreak;\r\n          case \"mapbox_satellite\":\r\n            this.mapbox_satellite.setVisible(true);\r\n\t\t\t\t\t\tthis.mapbox_rues.setVisible(false);\r\n\t\t\t\t\t\tbreak;\r\n          case \"blanc\":\r\n            this.mapbox_satellite.setVisible(false);\r\n\t\t\t\t\t\tthis.mapbox_rues.setVisible(false);\r\n            break;\r\n        }\r\n    },\r\n\r\n\r\n    // Ajouter les Geojson\r\n    AddVerctorLayer(layer_url){\r\n\t\t\tvar layer = new Vector({\r\n\t\t\t\tsource: new VectorSource({\r\n\t\t\t\turl: layer_url,\r\n\t\t\t\tformat: new GeoJSON(),\r\n        projection : 'EPSG:4326', \r\n        }),\r\n\t\t\t\tvisible: false,\r\n\t\t\t\t});\r\n    this.olmap.addLayer(layer)\r\n    return layer\r\n    },\r\n\r\n\r\n\r\n\r\n    //Affichage du fond de carte\r\n\t\tChangeLayerVisibility : function (layer) {\r\n      switch (layer) {\r\n        case \"bien_fond\":\r\n          console.log(document.getElementById(layer).checked)\r\n          if(document.getElementById(layer).checked == true){\r\n            this.bien_fond.setVisible(true);\r\n          }\r\n          else {\r\n            this.bien_fond.setVisible(false);\r\n          }\r\n\t\t\t\t  break;\r\n        case \"ddp\":\r\n          if(document.getElementById(layer).checked == true){\r\n            this.ddp.setVisible(true);\r\n          }\r\n          else {\r\n            this.ddp.setVisible(false);\r\n          }\r\n          break;\r\n        case \"batiment\":\r\n          if(document.getElementById(layer).checked == true){\r\n            this.batiment.setVisible(true);\r\n          }\r\n          else {\r\n            this.batiment.setVisible(false);\r\n          }\r\n          break;\r\n        case \"surface_cs\":\r\n          if(document.getElementById(layer).checked == true){\r\n            this.surface_cs.setVisible(true);\r\n          }\r\n          else {\r\n            this.surface_cs.setVisible(false);\r\n          }\r\n          break;\r\n        case \"od_lineaire\":\r\n          if(document.getElementById(layer).checked == true){\r\n            this.od_lineaire.setVisible(true);\r\n          }\r\n          else {\r\n            this.od_lineaire.setVisible(false);\r\n          }\r\n          break;\r\n        case \"od_surfacique\":\r\n          if(document.getElementById(layer).checked == true){\r\n            this.od_surfacique.setVisible(true);\r\n          }\r\n          else {\r\n            this.od_surfacique.setVisible(false);\r\n          }\r\n\t\t\t\t  break;\r\n        }\r\n      console.log(document.getElementById(layer).checked);\r\n      console.log(\"ChangeLayerVisibility(\\\"\" + layer + \"\\\")\");\r\n    },\r\n    //import projet en json\r\n    import_json : function () {\r\n        import_projet.openFile(import_projet.dispFile);\r\n      }\r\n  },\r\n\r\n  mounted() {\r\n    this.olmap = this.setupOpenlayersMap(this.center3857,this.zoom);\r\n    this.mapbox_rues = this.setupmapbox(this.mapbox_url_rues, this.mapbox_name_rues, true)\r\n    this.mapbox_satellite = this.setupmapbox(this.mapbox_url_satellite, this.mapbox_name_satellite, false)\r\n    this.bien_fond = this.AddVerctorLayer( \"geojson/MO_BF_Parcelle_WGS84.geojson\");\r\n    this.ddp = this.AddVerctorLayer( \"geojson/MO_BF_DDP_WGS84.geojson\");\r\n    this.batiment = this.AddVerctorLayer('geojson/MO_CS_Batiment_WGS84.geojson');\r\n    this.surface_cs = this.AddVerctorLayer( \"geojson/MO_CS_WGS84.geojson\");\r\n    this.od_lineaire = this.AddVerctorLayer( \"geojson/MO_OD_Autre_lineaire_WGS84.geojson\");\r\n    this.od_surfacique = this.AddVerctorLayer( \"geojson/MO_OD_Autre_Surfacique_WGS84.geojson\");\r\n\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#ol-container {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n#menu_gauche {\r\n  background-color: #ffffff ;\r\n  box-shadow: 1px 1px 12px #555;\r\n  z-index: 1;\r\n  padding: 5px 20px;\r\n  position: absolute;\r\n\ttop : 0px;\r\n  top : 0px;\r\n  height : 100%;\r\n  width : 270px;\r\n}\r\n\r\n#menu_droite {\r\n  background-color: #ffffff ;\r\n\tbox-shadow: 1px 1px 12px #555;\r\n\tz-index: 1;\r\n  padding: 5px 20px;\r\n  position: absolute;\r\n\ttop : 0px;\r\n\tright: 0px;\r\n\tfloat: right;\r\n\theight : 100%;\r\n\twidth : 300px;\r\n}\r\n</style>"]}]}